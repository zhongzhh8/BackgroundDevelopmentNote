后台开发：服务端的网络程序开发



后台（server）接受请求的方式：

1、TCP请求包：二进制格式

2、HTTP请求包：json、xml...



C 面向过程

C++面向对象



# 第一章

## 1.1 C++程序

#include一个文件， 就是把文件所有内容加进来

#include <>   加载系统提供的头文件

#include ""    先查找程序员自己写的头文件，后查找系统的头文件



using namespace std

C++标准函数库的所有元素都被声明在std命名空间中。命名空间用来让大量同名类名共存而不引发冲突。



## 1.2 函数

C++面向对象编程里除主函数外的函数一般写在类里面。

定义函数时后面是形参，调用时后面是实参。形参只有在被调用时才分配内存单元，调用结束后释放。

**函数重载：**允许用同一函数名定义多个不同的函数，但要求参数个数不同或类型不同。

**函数模板：**函数体相同，变量类型不同。调用函数时根据实参类型取代模板中的虚拟类型。要求函数的形参个数固定，形参之间类型相同。只是调用时可以用各种类型的实参。

```C++
template<typename T>
T add(T a,T b){
    return a+b;
}
```



## 1.3 数组

数组在内存中占用一片连续的存储单元

sizeof() 运算是在编译时就算好了，用来计算数据空间的字节数，不能用于计算动态分配的内存空间大小。

参数不同，sizeof返回的值不同：

- 数组——编译时分配的数组空间大小
- 指针——指针本身所用空间大小
- 类型——该类型占用空间大小
- 对象——对象实际占用空间大小（里面数据成员占用空间之和，注意类的成员函数不占用内存）
- 函数——函数返回类型占用空间大小（不能是void）



## 1.4 指针

系统在编译程序时给变量分配空间。编译完成后将变量名转换为变量的地址，通过地址对变量值进行存取。一个变量的地址称为该变量的指针。

指针：变量的地址

指针变量：用来存放某一个变量或者函数的地址（指针）

普通的变量用来存放数据，指针变量用来存放地址（指针）

指针部分还是得看书看详细的例子来理解。



指针函数：

```C++
int *p(int a){}
```

函数指针：

```C++
int (*p)(int a){}
int func(int a){}
p=func; //p是一个函数指针
```



## 1.5 引用

1、可以用来给一个变量取别名，两个名字都代指同一个变量。

```C++
int a;
int &r=a;
```

2、传引用

```C++
int func(int &a){}
```

- 一般形参传的是变量的值，传参时内存里生成临时副本，改变形参的值不影响实参的值。

- 用引用传参时不产生临时副本，改变形参值会同时改变实参。

传引用的实参需要是变量，不能是常量。

```C++
int func(int &a){}
int main(){
    int a=1;
    func(a); //正确
    func(1); //错误
}
```

C++在线编译：http://c.runoob.com/compile/12



## 1.6 结构体、共用体、枚举

### 1、结构体

```C++
struct 结构名{
    DataType1 name1;
    DataType2 name2;
    ...
};
```

### 2、共用体

union里定义多个不同的数据类型，这些数据共享union占用的内存，在不同的时间里保存不同的数据类型和长度的变量，来节省空间，但同一时间只能保存其中一个成员变量的值。

```C++
union 结构名{
    DataType1 name1;
    DataType2 name2;
    ...
};
```

可以用union判断系统是大端还是小端。

```C++
union test{
  	short a;
    char b[sizeof(short)];
};
test.a=0x0102;
if(test.b[0]==0x01){cout<<"大端";}//低地址放高位字节，大众思维
else{cout<<"小端";}
```

几乎所有网络协议都用大端方式传数据。

### 3、枚举

```C++
enum weekday {sun,mou,...,sat}; //自动赋值为1,2，...
enum weekday a=sat,b=mou,c=sun;
```



### 4、占用字节数

64位机器上：

| 1B   | 2B    | 4B          | 8B                                      |
| ---- | ----- | ----------- | --------------------------------------- |
| char | short | int,  float | long(在32位机里是4B), double, long long |

union：

1. union占用字节数以最长的变量为准；
2. 内存对齐，union占用字节数需要是其中最大的变量类型的字节数的整数倍。

结构体：

1. 每一个成员的偏移量都必须是该成员的倍数。
2. 结构体的大小必须是该结构体字节数最大成员的倍数。

（参考https://www.cnblogs.com/smile-812/p/7897187.html）



## 1.7 预处理

### 1、宏定义

```C++
#define 宏名 字符串
#define N 2+9  //这种最好加上括号
#define area(x) x*x  //带参数的宏定义，这种也最好加上括号，area(2)会被替换为2*2
```

编译时会把程序中的宏名全部替换为对应的字符串。



### 2、条件编译

一般用来debug

```C++
#define _DEBUG_ //有则执行程序段1，无则执行程序段2
#ifdef _DEBUG_
	程序段1
#else
	程序段2
#endif
//可以没有else部分
```









